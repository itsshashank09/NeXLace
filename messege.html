<!DOCTYPE html>
<html class="light" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>NeXLace - Dashboard</title>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#135bec",
                        "primary-dark": "#0e44b3",
                        "background-light": "#f6f6f8",
                        "background-dark": "#101622",
                        "surface-light": "#ffffff",
                        "surface-dark": "#151c2b",
                        "card-light": "#ffffff",
                        "card-dark": "#151c2b",
                        "text-main": "#0d121b",
                        "text-sub": "#4c669a",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "2xl": "1rem", "full": "9999px" },
                },
            },
        }
    </script>
    <script>
            (function () {
                const theme = localStorage.getItem('theme') || 'system';
                const element = document.documentElement;
                if (theme === 'dark' || (theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    element.classList.add('dark');
                } else {
                    element.classList.remove('dark');
                }
            })();
    </script>
</head>

<body class="bg-background-light dark:bg-background-dark text-text-main dark:text-[#f8f9fc] font-display antialiased">
    <div class="relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden">
        <header
            class="sticky top-0 z-50 w-full border-b border-[#e7ebf3] dark:border-[#2a3447] bg-white dark:bg-card-dark">
            <div class="mx-auto flex h-16 max-w-[1200px] items-center justify-between px-4 sm:px-6 lg:px-8">
                <div class="flex items-center gap-8">
                    <div class="flex items-center gap-2 text-primary">
                        <div class="flex items-center gap-2">
                            <a href="mainpage.html"><img src="assetes/logo.png" alt="NeXLace Logo"
                                    class="h-10 w-auto object-contain" /></a>
                            <a href="mainpage.html">
                                <h2 class="text-xl font-black tracking-tight text-[#0d121b] dark:text-white">NeXLace
                                </h2>
                            </a>
                        </div>
                    </div>
                    <div class="hidden md:flex items-center gap-6">
                        <a class="text-sm font-medium text-text-main dark:text-[#e7ebf3] hover:text-primary dark:hover:text-primary transition-colors"
                            href="developer.html">Hire Talent</a>
                        <a class="text-sm font-medium text-text-main dark:text-[#e7ebf3] hover:text-primary dark:hover:text-primary transition-colors"
                            href="findwork.html">Find Work</a>
                        <a class="text-sm font-medium text-text-main dark:text-[#e7ebf3] hover:text-primary dark:hover:text-primary transition-colors"
                            href="messege.html">Messages</a>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <div class="hidden sm:flex relative">
                        <span
                            class="absolute left-3 top-1/2 -translate-y-1/2 material-symbols-outlined text-gray-400 text-[20px]">search</span>
                        <input
                            class="h-9 w-64 rounded-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#1a2333] pl-10 pr-4 text-sm focus:border-primary focus:ring-primary"
                            placeholder="Search" type="text" />
                    </div>
                    <button class="text-text-sub hover:text-primary dark:text-gray-400 dark:hover:text-white">
                        <span class="material-symbols-outlined">help</span>
                    </button>
                    <button onclick="window.location.href='notification.html'"
                        class="text-text-sub hover:text-primary dark:text-gray-400 dark:hover:text-white">
                        <span class="material-symbols-outlined">notifications</span>
                    </button>
                    <div class="relative">
                        <button onclick="document.getElementById('profile-dropdown').classList.toggle('hidden')"
                            class="h-8 w-8 rounded-full bg-primary text-white flex items-center justify-center font-bold text-sm cursor-pointer hover:bg-primary-dark transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary dark:focus:ring-offset-[#151c2b]">
                            JD
                        </button>
                        <div id="profile-dropdown"
                            class="hidden absolute right-0 mt-3 w-72 origin-top-right rounded-xl border border-[#e7ebf3] bg-white shadow-xl dark:border-[#2a3447] dark:bg-card-dark dark:shadow-black/50 z-50">
                            <div class="border-b border-[#e7ebf3] px-5 py-4 dark:border-[#2a3447]">
                                <p class="font-bold text-text-main dark:text-white">Jason Doe</p>
                                <p class="text-xs text-text-sub mt-0.5">jason@nexlace.com</p>
                            </div>
                            <div class="p-2">
                                <a class="flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-text-main hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-[#1f2937] transition-colors"
                                    href="profilesetting.html">
                                    <span class="material-symbols-outlined text-[20px] text-text-sub">settings</span>
                                    Profile Settings
                                </a>
                                <a class="flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-text-main hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-[#1f2937] transition-colors"
                                    href="#">
                                    <span class="material-symbols-outlined text-[20px] text-text-sub">credit_card</span>
                                    Billing &amp; Payments
                                </a>
                                <a class="flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-text-main hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-[#1f2937] transition-colors"
                                    href="#">
                                    <span class="material-symbols-outlined text-[20px] text-text-sub">help</span>
                                    Help &amp; Support
                                </a>
                            </div>
                            <div class="border-t border-[#e7ebf3] p-2 dark:border-[#2a3447]">
                                <a class="flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 transition-colors"
                                    href="index.html">
                                    <span class="material-symbols-outlined text-[20px]">logout</span>
                                    Logout
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
        </header>
        <!-- Main Layout -->
        <main class="flex flex-1 overflow-hidden h-full">
            <!-- Left Sidebar: Conversation List -->
            <aside id="message-sidebar"
                class="w-full md:w-80 flex flex-col border-r border-[#e7ebf3] dark:border-[#2a3447] bg-white dark:bg-card-dark z-10 shrink-0">
                <!-- Sidebar Header -->
                <div class="px-5 py-5 pb-3">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold tracking-tight text-text-main dark:text-white">Messages</h2>
                        <button aria-label="New Message"
                            class="text-text-sub flex items-center justify-center hover:text-primary transition-colors">
                            <span class="material-symbols-outlined text-[22px]">edit_square</span>
                        </button>
                    </div>
                    <!-- Search -->
                    <div class="relative w-full">
                        <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-text-sub">
                            <span class="material-symbols-outlined text-[20px]">search</span>
                        </span>
                        <input
                            class="w-full h-10 pl-10 pr-4 rounded-lg bg-background-light dark:bg-[#101622] border border-[#e7ebf3] dark:border-[#2a3447] focus:ring-1 focus:ring-primary focus:border-primary text-sm placeholder:text-text-sub dark:text-white"
                            placeholder="Search messages" type="text" />
                    </div>
                </div>

                <!-- Conversations List -->
                <div class="flex-1 overflow-y-auto">
                    <!-- Active Item -->
                    <div
                        class="relative group flex items-start gap-3 px-5 py-4 cursor-pointer bg-[#f0f6ff] dark:bg-primary/5 transition-colors">
                        <div class="absolute left-0 top-0 bottom-0 w-1 bg-primary"></div>
                        <div class="relative shrink-0 mt-0.5">
                            <div class="bg-center bg-no-repeat bg-cover rounded-full size-11"
                                data-alt="Portrait of Sarah Jenkins"
                                style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuClboGwbK4px3C5fwaYmYHOG7Lt_jnhSNbyEKG55gmoQ7BEvJAiwwLlpglaGY2VMdmqy_v1gGSwwJMeaXB9JIGPmwnzAAvzgd6R3U7QHS9sd0aKVqGLGXOm-dplNy6UIXTmZabfdJmdaJhIdHMGlJW4yKRkEjXZK9h7HbUyMA0m5c-x1hOKZLRAUibpwth_MnWnNJQiJkybg71UzwPyRzonSGBFVbY1OdefYb8dplCoHx_M1v74GHswArgS7vwshRJUzlIhLZl_n_I");'>
                            </div>
                            <span
                                class="absolute bottom-0.5 right-0.5 size-2.5 bg-green-500 rounded-full border-2 border-[#f0f6ff] dark:border-[#151c2b]"></span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex justify-between items-baseline mb-0.5">
                                <h3 class="font-bold text-sm truncate text-text-main dark:text-white">
                                    Sarah J.</h3>
                                <span class="text-xs text-primary font-medium">Now</span>
                            </div>
                            <p class="text-xs truncate text-text-main dark:text-[#cdcfd4] line-clamp-1"><span
                                    class="font-medium">You:</span> Invitation sent: Full-time...</p>
                        </div>
                    </div>

                    <!-- Regular Item -->
                    <div
                        class="group flex items-start gap-3 px-5 py-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-[#1f2937] transition-colors border-b border-[#e7ebf3]/50 dark:border-[#2a3447]/50">
                        <div class="relative shrink-0 mt-0.5">
                            <div class="bg-center bg-no-repeat bg-cover rounded-full size-11"
                                data-alt="Portrait of Michael Chen"
                                style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCrBN0anrhlxoRu2iRnGwkWGcSXOwG16rSXSUpiULPWinNFJ2ZkvuwOkViSh9FL62K3Y9yoZ6bR-9eIVt5RvvbX0EIs-r8DqxjMEhpIww0ydLvEESWE4R4RUEyjDNv9exFU_nroi8nRNSyKC3yGZuf3b7x8PVtKV6vxNxjBeNBAdhVHKXTC2pTzCcQl0sbviP-pl55jSb1wDslUFDxEIjPbgZw-3AdO0cHgoBrfRfiWhMKPqJuek-hN-8JZN_CGGNnNS0wlCQTfnQE");'>
                            </div>
                            <!-- Offline/Status indicator could go here, omitting for now based on mockup which only shows active green on some -->
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex justify-between items-baseline mb-0.5">
                                <h3 class="font-bold text-sm truncate text-text-main dark:text-white">
                                    David C.</h3>
                                <span class="text-xs text-text-sub">2h ago</span>
                            </div>
                            <p class="text-xs truncate text-text-sub">That sounds great! When can w...</p>
                        </div>
                    </div>

                    <!-- Regular Item -->
                    <div
                        class="group flex items-start gap-3 px-5 py-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-[#1f2937] transition-colors border-b border-[#e7ebf3]/50 dark:border-[#2a3447]/50">
                        <div class="relative shrink-0 mt-0.5">
                            <div class="bg-center bg-no-repeat bg-cover rounded-full size-11"
                                data-alt="Portrait of Emily Davis"
                                style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCAIQrWamTlSNuIJTFidSHy5_hJeR6GTYL8DC0jCNJHTh3HvP82GVzfzK7qZf9IvfFG4nyJNtrXiXG6qn_VAYooA940zMup-8n1ltippi2hKp730VccFj1TrZxf_eKrVTsyH1rc_Xl5TDTjymrmRQ6L7w0v-W62ZfgB4EqoIeXaAJd3PmpF38qBbcttn88eW6kKJhae1FwwlaHBq6WGfh7yBaq4xL8uPypUuMWg1QNfl-djpZqZwC4QFNq8X2-q04d-HNbMvCucBk8");'>
                            </div>
                            <span
                                class="absolute bottom-0.5 right-0.5 size-2.5 bg-green-500 rounded-full border-2 border-white dark:border-[#151c2b]"></span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex justify-between items-baseline mb-0.5">
                                <h3 class="font-bold text-sm truncate text-text-main dark:text-white">
                                    Elena R.</h3>
                                <span class="text-xs text-text-sub">Yesterday</span>
                            </div>
                            <p class="text-xs truncate text-text-sub">File attached: design-v2.fig</p>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Right Pane: Active Conversation -->
            <section id="chat-section" class="hidden md:flex flex-col flex-1 bg-white dark:bg-background-dark relative">


                <!-- Chat Header -->
                <div
                    class="flex items-center justify-between px-8 py-4 border-b border-[#e7ebf3] dark:border-[#2a3447] bg-white dark:bg-card-dark">
                    <div class="flex items-center gap-3">
                        <button id="back-to-list"
                            class="md:hidden p-2 -ml-2 text-text-sub hover:text-primary transition-colors"
                            aria-label="Back to conversations">
                            <span class="material-symbols-outlined">arrow_back</span>
                        </button>
                        <div class="relative">
                            <div class="bg-center bg-no-repeat bg-cover rounded-full size-11"
                                data-alt="Small portrait of Sarah Jenkins"
                                style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBzdP5KtQYiXkk5ry3hrUngtqeo_P_GPJv4FWkaKnOS5wNbKfnypGEs2R0glpR7-lSlalqBmPEAHxABHdpm78Lf7kn080o0kx56_hNUJ1rXl_z7ek_oDyjVyLcFReFmk4_DqSOQt6TZolHdUBmOaFz9e1LvtG513VCwQ5-y-MRl1f37e4hBDvjBFAhizpyCl8Fg7xkQTwFpQdPMmXwZi_4U1-SbIdmEgdHmNDKDGICeHoul2LMJ4msgJpeRqAbKTfkPwSvGWfCKPVE");'>
                            </div>
                            <span
                                class="absolute bottom-0.5 right-0.5 size-3 bg-green-500 rounded-full border-2 border-white dark:border-[#151c2b]"></span>
                        </div>
                        <div>
                            <div class="flex items-center gap-1.5">
                                <h3 class="font-bold text-lg text-text-main dark:text-white">Sarah J.</h3>
                                <span class="material-symbols-outlined text-primary text-[18px] filled"
                                    style="font-variation-settings: 'FILL' 1;">verified</span>
                            </div>
                            <div class="flex items-center gap-1.5 text-xs text-text-sub">
                                <span class="inline-block size-1.5 rounded-full bg-green-500"></span>
                                <span>Online â€¢ Local Time 10:42 AM</span>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <button aria-label="Voice Call"
                            class="p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors">
                            <span class="material-symbols-outlined text-[24px]">call</span>
                        </button>
                        <button aria-label="Video Call"
                            class="p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors">
                            <span class="material-symbols-outlined text-[24px]">videocam</span>
                        </button>
                        <button aria-label="More Options"
                            class="p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors">
                            <span class="material-symbols-outlined text-[24px]">more_vert</span>
                        </button>
                    </div>
                </div>

                <!-- Messages Stream -->
                <div class="flex-1 overflow-y-auto p-8 flex flex-col items-center scroll-smooth" id="chat-stream">
                    <!-- System Message -->
                    <div class="my-6">
                        <span
                            class="px-4 py-1.5 bg-[#e7ebf3] dark:bg-[#1f2937] rounded-full text-xs font-semibold text-text-sub">
                            Today
                        </span>
                    </div>

                    <div class="text-xs text-[#a0aec0] mb-8 italic">You started a new conversation with Sarah J.</div>

                    <!-- Job Invitation Card -->
                    <div class="w-full max-w-xl self-center relative mr-12">
                        <div
                            class="bg-white dark:bg-card-dark border border-[#e7ebf3] dark:border-[#2a3447] rounded-xl overflow-hidden shadow-sm">
                            <div
                                class="px-6 py-4 bg-[#f0f6ff] dark:bg-[#1a2333] border-b border-[#e7ebf3] dark:border-[#2a3447] flex justify-between items-center">
                                <div class="flex items-center gap-3">
                                    <div class="p-2 bg-white dark:bg-[#252f3f] rounded-lg text-primary shadow-sm">
                                        <span class="material-symbols-outlined text-[20px] filled"
                                            style="font-variation-settings: 'FILL' 1;">work</span>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-sm text-primary uppercase tracking-wide">JOB
                                            INVITATION SENT</h4>
                                        <p class="text-[10px] uppercase font-semibold text-text-sub tracking-wider">
                                            Awaiting response</p>
                                    </div>
                                </div>
                            </div>
                            <div class="p-6">
                                <div class="mb-5">
                                    <p class="text-[10px] font-bold text-[#a0aec0] uppercase tracking-wider mb-1">WORK
                                        TYPE</p>
                                    <h3 class="font-bold text-base text-text-main dark:text-white">Full-time Contract:
                                        E-commerce Refactor</h3>
                                </div>
                                <div class="mb-6">
                                    <p class="text-[10px] font-bold text-[#a0aec0] uppercase tracking-wider mb-1">WORK
                                        DETAILS</p>
                                    <p class="text-sm text-text-main dark:text-[#cdcfd4] mb-4 leading-relaxed">Hi Sarah,
                                        based on your impressive React portfolio, I'd like to invite you to lead our
                                        frontend migration project. We are moving a legacy codebase to Next.js and need
                                        a senior architect.</p>

                                    <div class="flex items-center gap-2 text-text-sub text-xs">
                                        <span class="material-symbols-outlined text-[16px]">mail</span>
                                        <span>sophia.miller@nexlace.com</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Sender Avatar (You) -->
                        <div class="absolute -right-12 bottom-0">
                            <div class="bg-center bg-no-repeat bg-cover rounded-full size-8"
                                style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBigY-zC7w3oM8oZJVx2hLR9HH4VBIUZ_Z8G1NLgj4kwWUHhJbg3z382wqkIkk8wcD_uZv0HY6O7dEJudnrLgVXwaYamaZc5I8ARSqm7tU4AmXUZ8dIHLLz4m_RhzaoUstI0uTitxmpLj0KgB-ylZzpCNaEzQKOah7qmxxF5lG_C6o5K_XaMfSlKyHZ4bHmbVJeVuioo2wr0C7VYUYRtf2LjK9C76LnYYe35_oHNxQoHs9ReM2walJB7jpyfL2JmrpSGBT99AqQdYA");'>
                            </div>
                            <div class="flex justify-end gap-1 mt-1 pr-1">
                                <span class="text-[10px] text-text-sub">10:42 AM</span>
                                <span class="material-symbols-outlined text-[14px] text-primary">done_all</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Input Area -->
                <div class="p-6 bg-white dark:bg-card-dark z-10"> <!-- Removed top border to match clean look -->
                    <div class="flex items-center gap-4">
                        <button aria-label="Create new"
                            class="flex items-center justify-center size-10 rounded-full bg-[#f6f6f8] dark:bg-[#1f2937] text-text-sub hover:text-primary transition-colors">
                            <span class="material-symbols-outlined text-[24px]">add</span>
                        </button>

                        <div class="flex-1 relative">
                            <input type="text"
                                class="w-full h-12 rounded-full border border-[#e7ebf3] dark:border-[#2a3447] bg-white dark:bg-background-dark pl-6 pr-14 text-sm focus:ring-1 focus:ring-primary focus:border-primary placeholder:text-[#a0aec0]"
                                placeholder="Type a message...">
                            <div class="absolute right-2 top-1/2 -translate-y-1/2 flex items-center pr-2 gap-1">
                                <button aria-label="Add emoji"
                                    class="p-1.5 text-text-sub hover:text-primary transition-colors">
                                    <span class="material-symbols-outlined text-[20px]">sentiment_satisfied</span>
                                </button>
                                <button aria-label="Attach file"
                                    class="p-1.5 text-text-sub hover:text-primary transition-colors">
                                    <span class="material-symbols-outlined text-[20px] rotate-45">attach_file</span>
                                </button>
                            </div>
                        </div>

                        <button aria-label="Send Message"
                            class="flex items-center justify-center size-12 rounded-full bg-primary text-white hover:bg-primary-dark transition-transform active:scale-95 shadow-lg shadow-blue-600/20">
                            <span class="material-symbols-outlined text-[22px]">send</span>
                        </button>
                    </div>
                </div>
            </section>
        </main>
        <script>
            document.addEventListener('DOMContentLoaded', () => {

                // Elements
                const inputField = document.querySelector('input[placeholder="Type a message..."]');
                const sendBtn = document.querySelector('button[aria-label="Send Message"]');
                const chatStream = document.getElementById('chat-stream');
                const sidebar = document.getElementById('message-sidebar');
                const chatSection = document.getElementById('chat-section');
                const backBtn = document.getElementById('back-to-list');

                // Default content cache (for Sarah's conversation)
                const sarahContent = chatStream.innerHTML;

                // Functionality for Sending Messages
                function sendMessage() {
                    const text = inputField.value.trim();
                    if (!text) return;

                    const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

                    const messageHTML = `
                    <div class="flex flex-row-reverse gap-4 max-w-[80%] self-end animate-in fade-in slide-in-from-bottom-2 duration-300">
                        <div class="bg-center bg-no-repeat bg-cover rounded-full size-8 mt-1 shrink-0"
                             style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBigY-zC7w3oM8oZJVx2hLR9HH4VBIUZ_Z8G1NLgj4kwWUHhJbg3z382wqkIkk8wcD_uZv0HY6O7dEJudnrLgVXwaYamaZc5I8ARSqm7tU4AmXUZ8dIHLLz4m_RhzaoUstI0uTitxmpLj0KgB-ylZzpCNaEzQKOah7qmxxF5lG_C6o5K_XaMfSlKyHZ4bHmbVJeVuioo2wr0C7VYUYRtf2LjK9C76LnYYe35_oHNxQoHs9ReM2walJB7jpyfL2JmrpSGBT99AqQdYA");'>
                        </div>
                        <div class="flex flex-col gap-1 items-end">
                            <div class="flex items-baseline gap-2">
                                <span class="text-xs text-text-sub">${time}</span>
                                <span class="text-sm font-semibold text-text-main dark:text-white">You</span>
                            </div>
                            <div class="p-4 bg-primary text-white rounded-2xl rounded-tr-none shadow-sm text-sm leading-relaxed">
                                <p>${text}</p>
                            </div>
                        </div>
                    </div>
                `;

                    chatStream.insertAdjacentHTML('beforeend', messageHTML);
                    inputField.value = '';
                    chatStream.scrollTop = chatStream.scrollHeight;
                }

                if (sendBtn) sendBtn.addEventListener('click', sendMessage);
                if (inputField) {
                    inputField.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') sendMessage();
                    });
                }

                // Functionality for Sidebar Selection
                const conversationItems = document.querySelectorAll('aside .group');
                conversationItems.forEach(item => {
                    item.addEventListener('click', function () {
                        // Desktop Styling
                        conversationItems.forEach(i => {
                            i.classList.remove('bg-[#f0f6ff]', 'dark:bg-primary/5');
                            i.classList.add('hover:bg-gray-50', 'dark:hover:bg-[#1f2937]');
                            const border = i.querySelector('.absolute.left-0');
                            if (border) border.remove();
                        });

                        this.classList.remove('hover:bg-gray-50', 'dark:hover:bg-[#1f2937]');
                        this.classList.add('bg-[#f0f6ff]', 'dark:bg-primary/5');

                        if (!this.querySelector('.absolute.left-0')) {
                            const border = document.createElement('div');
                            border.className = 'absolute left-0 top-0 bottom-0 w-1 bg-primary';
                            this.prepend(border);
                        }

                        // Content Logic
                        const name = this.querySelector('h3').innerText;

                        // Handle conversation switch
                        if (!name.includes('Sarah')) {
                            chatStream.innerHTML = `
                            <div class="my-6 text-center">
                                <span class="px-4 py-1.5 bg-[#e7ebf3] dark:bg-[#1f2937] rounded-full text-xs font-semibold text-text-sub">Today</span>
                            </div>
                            <div class="flex flex-col items-center justify-center h-full text-center pb-20 fade-in animate-in">
                                <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-full mb-3 text-text-sub">
                                    <span class="material-symbols-outlined text-[32px]">forum</span>
                                </div>
                                <h3 class="font-bold text-text-main dark:text-white">Start chatting with ${name}</h3>
                                <p class="text-sm text-text-sub mt-1">Say hi to start the conversation!</p>
                            </div>
                         `;
                            // Update header name
                            const headerName = document.querySelector('section h3.text-lg');
                            if (headerName) headerName.innerText = name;
                        } else {
                            // Restore Sarah's content
                            chatStream.innerHTML = sarahContent;
                            // Reset header name just in case
                            const headerName = document.querySelector('section h3.text-lg');
                            if (headerName) headerName.innerText = "Sarah J.";
                        }

                        // MOBILE LOGIC: Hide sidebar, show chat
                        if (window.innerWidth < 768) {
                            sidebar.classList.add('hidden');
                            chatSection.classList.remove('hidden');
                            chatSection.classList.add('flex');
                        }
                    });
                });

                // Handle Back Button (Mobile)
                if (backBtn) {
                    backBtn.addEventListener('click', () => {
                        sidebar.classList.remove('hidden');
                        chatSection.classList.add('hidden');
                        chatSection.classList.remove('flex');
                    });
                }

                // Filter Search
                const searchInput = document.querySelector('aside input');
                if (searchInput) {
                    searchInput.addEventListener('input', (e) => {
                        const term = e.target.value.toLowerCase();
                        conversationItems.forEach(item => {
                            const name = item.querySelector('h3').innerText.toLowerCase();
                            if (name.includes(term)) {
                                item.classList.remove('hidden');
                                item.classList.add('flex');
                            } else {
                                item.classList.add('hidden');
                                item.classList.remove('flex');
                            }
                        });
                    });
                }
            });
        </script>
</body>

</html>